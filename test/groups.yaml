# ------------------------------------------------------------------------------
# Testing Groups
#
# Addons need to be added to a testing group here to be validated and deploy &
# cleanup tested. New addons need to be added to a group or CI will fail.
#
# NOTE: only the most recent revision of an addon will be tested. If you need
# to run specific tests for older revisions, you'll need to write explicit tests
# to cover that scenario.
# ------------------------------------------------------------------------------

# ------------------------------------------------------------------------------
# General
#
# Addons in this testing group are simple, low on resource requirements and dont
# require any dependencies or significant work to deploy.
# ------------------------------------------------------------------------------
general:
- name: "jenkins"

# ------------------------------------------------------------------------------
# Kafka
#
# All Kafka related addons should be tested as a part of this group
# ------------------------------------------------------------------------------
kafka:
- name: "kafka"
  # remove promethues dependency for CI
  # https://jira.d2iq.com/browse/D2IQ-63819
  removeDependencies:
    - prometheus
  override: |
    ZOOKEEPER_URI: zookeeper-cs
    BROKER_MEM: 32Mi
    BROKER_CPUS: 20m
    ADD_SERVICE_MONITOR: false
- name: "zookeeper"
  override: |
    MEMORY: "32Mi"
    CPUS: 50m

# ------------------------------------------------------------------------------
# Cassandra
# ------------------------------------------------------------------------------
cassandra:
- name: "cassandra"
  override: |
    NODE_COUNT: 1
    NODE_DISK_SIZE_GIB: 1
    PROMETHEUS_EXPORTER_ENABLED: "false"

# ------------------------------------------------------------------------------
# Spark testing group
# ------------------------------------------------------------------------------
spark:
- name: "spark"
  removeDependencies:
  - prometheus
  override: |
    enableMetrics: "false"
